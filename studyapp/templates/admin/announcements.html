{% extends "admin/admin_base.html" %}

{% block content %}
            <section class="content-section" id="announcementsSection" aria-labelledby="announcementsHeading"
                style="display: none;">
                <div class="section-header">
                    <div class="header-left">
                        <h1 class="section-title" id="announcementsHeading">Announcements</h1>
                        <p class="section-subtitle">Create and manage announcements for students and teachers.</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn-primary" onclick="openCreateAnnouncementModal()">
                            <i class="fas fa-plus"></i>
                            Create Announcement
                        </button>
                    </div>
                </div>

                <!-- Announcements List -->
                <div class="announcements-container">
                    <!-- Announcement Item 1 -->
                    <div class="announcement-item">
                        <div class="announcement-header">
                            <div class="announcement-author">
                                <div class="author-avatar">
                                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face"
                                        alt="Admin"
                                        onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                    <div class="avatar-fallback" style="display: none;">ðŸ‘¤</div>
                                </div>
                                <div class="author-info">
                                    <div class="author-name">Administration</div>
                                    <div class="announcement-date">2 hours ago</div>
                                </div>
                            </div>
                            <div class="announcement-badge important">
                                <i class="fas fa-star"></i>
                                Important
                            </div>
                        </div>
                        <div class="announcement-content">
                            <h3 class="announcement-title">System Maintenance Notice</h3>
                            <p class="announcement-text">The system will undergo scheduled maintenance on Saturday,
                                December 21st from 2:00 AM to 6:00 AM. During this time, the platform will be
                                temporarily unavailable. Please plan accordingly.</p>
                        </div>
                        <div class="announcement-footer">
                            <div class="announcement-tags">
                                <span class="tag">System</span>
                                <span class="tag">Maintenance</span>
                            </div>
                            <div class="announcement-recipients">
                                <i class="fas fa-users"></i>
                                <span>Sent to: All Students, All Teachers</span>
                            </div>
                        </div>
                    </div>

                    <!-- Announcement Item 2 -->
                    <div class="announcement-item">
                        <div class="announcement-header">
                            <div class="announcement-author">
                                <div class="author-avatar">
                                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face"
                                        alt="Admin"
                                        onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                    <div class="avatar-fallback" style="display: none;">ðŸ‘¤</div>
                                </div>
                                <div class="author-info">
                                    <div class="author-name">Administration</div>
                                    <div class="announcement-date">1 day ago</div>
                                </div>
                            </div>
                            <div class="announcement-badge general">
                                <i class="fas fa-info-circle"></i>
                                General
                            </div>
                        </div>
                        <div class="announcement-content">
                            <h3 class="announcement-title">New Feature: Enhanced Assignment Tracking</h3>
                            <p class="announcement-text">We're excited to announce a new feature that allows teachers to
                                track student assignments more efficiently. Teachers can now view detailed progress and
                                analytics for each assignment.</p>
                        </div>
                        <div class="announcement-footer">
                            <div class="announcement-tags">
                                <span class="tag">Features</span>
                                <span class="tag">Updates</span>
                            </div>
                            <div class="announcement-recipients">
                                <i class="fas fa-users"></i>
                                <span>Sent to: All Teachers</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div class="announcements-empty" style="display: none;">
                    <div class="empty-state">
                        <i class="fas fa-bullhorn"></i>
                        <h3>No Announcements</h3>
                        <p>You haven't created any announcements yet. Click "Create Announcement" to get started.</p>
                    </div>
                </div>
            </section>

<script>
    (function () {
        function initAnnouncements() {
            if (typeof window.loadAnnouncements === 'function') {
                console.log('Initializing Admin Announcements...');
                window.loadAnnouncements();
                if (typeof window.fetchAnnouncementRecipients === 'function') {
                    window.fetchAnnouncementRecipients();
                }
            } else {
                console.log('loadAnnouncements not found, retrying...');
                setTimeout(initAnnouncements, 100);
            }
        }
        initAnnouncements();
    })();
</script>
{% endblock %}
